<%
	var hasCategory = !_.isEmpty(category);
	var hasSymptom = !_.isEmpty(symptom);
	var isAddNew = !isEdit;
	var readyToRender =  hasCategory && (hasSymptom || isAddNew);
	if (readyToRender) {
%>
	<h3><%= isEdit ? 'Edit' : 'Add' %> <%= category.name %> Event</h3>
	<form id="symptomsubmitform" action="#categories/<%=category.name%>">
		<label for="date">Date: </label>
			<input type="date" name="date" value="<%= symptom.date ? moment(symptom.date.iso).format('YYYY-MM-DD') : moment().format('YYYY-MM-DD') %>"/><br/>
		<label for="severity">Severity: </label>
			<input type="number" name="severity" 
				min="<%= category.rangeMin %>" 
				max="<%= category.rangeMax %>" 
				step="<%= category.stepSize %>"
				value="<%= symptom.severity ? symptom.severity : category.rangeMin %>"/> <%= category.unit %><br/>
		<label>Duration: </label>
			<input type="number" name="hours" value="<%= symptom.duration ? Math.round(symptom.duration / 3600) : 0 %>" min="0"> hh
			<input type="number" name="minutes" value="<%= symptom.duration ? Math.round((symptom.duration % 3600) / 60) : 0 %>" min="0"> mm
			<input type="number" name="seconds" value="<%= symptom.duration ? Math.round(((symptom.duration % 3600) % 60)) : 0 %>" min="0"> ss<br/>
		<label for="comment">Comment: </label>
			<input type="text" name="comment" value="<%= symptom.comment %>"/>
		<input type="submit">
	</form>
<% } else { %>
	Loading&hellip;
<% } %>